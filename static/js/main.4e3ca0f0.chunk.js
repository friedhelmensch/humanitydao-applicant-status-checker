(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e){e.exports={contractName:"HumanityGovernance",abi:[{constant:!0,inputs:[{name:"",type:"uint256"}],name:"proposals",outputs:[{name:"result",type:"uint8"},{name:"target",type:"address"},{name:"data",type:"bytes"},{name:"proposer",type:"address"},{name:"feeRecipient",type:"address"},{name:"fee",type:"uint256"},{name:"startTime",type:"uint256"},{name:"yesCount",type:"uint256"},{name:"noCount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"proposalId",type:"uint256"}],name:"finalize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"address"}],name:"yesVotes",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"fee",type:"uint256"}],name:"setProposalFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"time",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"proposalId",type:"uint256"}],name:"voteNo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"proposalId",type:"uint256"}],name:"removeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"OPEN_VOTE_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"proposalId",type:"uint256"}],name:"voteYes",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"TOTAL_VOTE_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getProposalsCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"target",type:"address"},{name:"data",type:"bytes"}],name:"propose",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"void",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"withdrawTimes",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"deposit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"proposalFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"proposalId",type:"uint256"}],name:"getProposal",outputs:[{components:[{name:"result",type:"uint8"},{name:"target",type:"address"},{name:"data",type:"bytes"},{name:"proposer",type:"address"},{name:"feeRecipient",type:"address"},{name:"fee",type:"uint256"},{name:"startTime",type:"uint256"},{name:"yesCount",type:"uint256"},{name:"noCount",type:"uint256"}],name:"",type:"tuple"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"address"}],name:"noVotes",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"feeRecipient",type:"address"},{name:"target",type:"address"},{name:"data",type:"bytes"}],name:"proposeWithFeeRecipient",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"VETO_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"humanity",type:"address"},{name:"proposalFee",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalId",type:"uint256"}],name:"Execute",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalId",type:"uint256"},{indexed:!0,name:"proposer",type:"address"},{indexed:!0,name:"target",type:"address"},{indexed:!1,name:"data",type:"bytes"}],name:"Propose",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalId",type:"uint256"},{indexed:!0,name:"voter",type:"address"}],name:"RemoveVote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalId",type:"uint256"}],name:"Terminate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalId",type:"uint256"},{indexed:!0,name:"voter",type:"address"},{indexed:!1,name:"approve",type:"bool"},{indexed:!1,name:"weight",type:"uint256"}],name:"Vote",type:"event"}],networks:{1:{name:"Mainnet",address:"0xDd806c4fDAd2949a97Fda79036cfbb8750181b37"}}}},102:function(e){e.exports={contractName:"TwitterHumanityApplicant",abi:[{constant:!1,inputs:[{name:"who",type:"address"},{name:"username",type:"string"}],name:"applyWithTwitterFor",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"who",type:"address"}],name:"applyFor",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"who",type:"address"},{name:"username",type:"string"}],name:"applyWithTwitterUsingEtherFor",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"humanity",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"who",type:"address"}],name:"applyWithEtherFor",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"governance",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"registry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"username",type:"string"}],name:"applyWithTwitterUsingEther",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"exchange",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"username",type:"string"}],name:"applyWithTwitter",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_governance",type:"address"},{name:"_registry",type:"address"},{name:"_humanity",type:"address"},{name:"_exchange",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"proposalId",type:"uint256"},{indexed:!0,name:"applicant",type:"address"},{indexed:!1,name:"username",type:"string"}],name:"Apply",type:"event"}],networks:{1:{name:"Mainnet",address:"0x9D661f7773Be14439b4223F5b516bC7Ef67b0369"}}}},194:function(e,t,a){e.exports=a(471)},199:function(e,t,a){},213:function(e,t){},215:function(e,t){},308:function(e,t){},379:function(e,t){},468:function(e,t,a){},471:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(186),o=a.n(r),l=(a(199),a(9)),p=a.n(l),i=a(24),c=a(187),u=a(188),m=a(191),d=a(189),y=a(192),b=a(99),f=a(100),E=a.n(f),h=function(){return new Promise(function(e,t){window.addEventListener("load",Object(i.a)(p.a.mark(function t(){var a,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=new E.a.providers.HttpProvider("https://mainnet.infura.io/"),n=new E.a(a),console.log("Using infura's Ethereum API."),e(n);case 4:case"end":return t.stop()}},t,this)})))})},v=a(190),g=a(193),w=a(101),x=a(102),N=function(e){var t=new e.eth.Contract(w.abi,w.networks[1].address),a=new e.eth.Contract(x.abi,x.networks[1].address),n=function(){var e=Object(i.a)(p.a.mark(function e(){var a,n,s,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.getProposalsCount().call();case 2:a=e.sent,s=[],n=a-1;case 5:if(!(n>0)){e.next=15;break}return e.next=8,t.methods.getProposal(n).call();case 8:if(0===(r=e.sent).result){e.next=11;break}return e.abrupt("break",15);case 11:s.push(Object(g.a)({},r,{id:n}));case 12:n--,e.next=5;break;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return{fetchProposalState:function(){var e=Object(i.a)(p.a.mark(function e(n){var s,r,o,l,i,c,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=n,e.next=4,Promise.all([t.methods.getProposal(s).call(),t.getPastEvents("Vote",{filter:{proposalId:s},fromBlock:7723872}),t.getPastEvents("RemoveVote",{filter:{proposalId:s},fromBlock:7723872}),a.getPastEvents("Apply",{filter:{proposalId:s},fromBlock:7723946})]);case 4:return r=e.sent,o=Object(v.a)(r,4),l=o[0],i=o[1],c=o[2],u=o[3],l.proposalIdStr=s,e.abrupt("return",{proposal:l,voteEvents:i,removeVoteEvents:c,applyEventsFromProposalId:u});case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),alert("Wrong Proposal ID or Address.");case 18:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}(),fetchAllProposals:n}},P=(a(468),function(e,t){return e?s.a.createElement("span",{className:"text-success"},t):s.a.createElement("span",{className:"text-danger"},t)}),M={0:s.a.createElement("span",{className:"text-info"},"Pending"),1:s.a.createElement("span",{className:"text-success"},"Yes"),2:s.a.createElement("span",{className:"text-danger"},"No")},k=function(e){return s.a.createElement("a",{href:"https://etherscan.io/address/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)},I=function(e){return s.a.createElement("a",{href:"https://etherscan.io/tx/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)},S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={web3:null,textToSearch:"",proposal:null,voteEvents:[],removeVoteEvents:[],applyEventsFromProposalId:[],isSearching:!1,activeProposals:[]},a.fetchAndPopulate=function(){var e=Object(i.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.state.fetchProposalState(t);case 2:n=e.sent,a.setState({isSearching:!1}),a.setState({proposal:n.proposal,voteEvents:n.voteEvents,removeVoteEvents:n.removeVoteEvents,applyEventsFromProposalId:n.applyEventsFromProposalId});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=Object(i.a)(p.a.mark(function e(){var t,n,s,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:return t=e.sent,e.next=6,a.setState({web3:t});case 6:n=N(t),s=n.fetchProposalState,r=n.fetchAllProposals,a.setState({fetchProposalState:s,fetchAllProposals:r}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Failed to load web3, accounts, or contract. Check console for details."),console.error(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,10]])})),a.handleProposalIdTextChange=function(e){a.setState({textToSearch:e.target.value.trim()})},a.handleSearch=function(e){e.preventDefault(),a.fetchAndPopulate(a.state.textToSearch)},a.handleGetAllProposals=function(){var e=Object(i.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isSearching:!0}),e.next=4,a.state.fetchAllProposals();case 4:n=e.sent,a.setState({isSearching:!1,activeProposals:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a=this.state,n=a.web3,r=a.proposal,o=a.voteEvents,l=a.removeVoteEvents,p=a.applyEventsFromProposalId,i=a.isSearching,c=a.activeProposals;return console.log(r),n?s.a.createElement("div",{className:"App"},s.a.createElement("nav",{className:"navbar justify-content-start navbar-light bg-light"},s.a.createElement("span",{className:"navbar-brand mb-0 h1"},"HumanityDAO Checker"),s.a.createElement("a",{className:"nav-link",href:"https://www.humanitydao.org/",target:"_blank",rel:"noopener noreferrer"},"Humanity"),s.a.createElement("a",{className:"nav-link",href:"https://discord.gg/yvUqPUn",target:"_blank",rel:"noopener noreferrer"},"Discord")),s.a.createElement("div",{className:"container pt-3 pb-3"},s.a.createElement("form",{onSubmit:this.handleGetAllProposals,className:"form-inline justify-content-center mb-5"},s.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Get all active proposals"})),i&&s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"spinner-grow",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))),c.length>0&&s.a.createElement("div",{className:"mb-5"},s.a.createElement("div",{className:"section-title"},"Proposals"),s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("thead",{className:"thead-light"},s.a.createElement("tr",null,s.a.createElement("th",null,"Proposal ID"),s.a.createElement("th",null,"Proposer"),s.a.createElement("th",null,"Proposed action"),s.a.createElement("th",null,"Target"),s.a.createElement("th",null,"Start time"))),s.a.createElement("tbody",null,c.map(function(e){return console.log(e),s.a.createElement("tr",{key:"proposal-"+e.id},s.a.createElement("td",null,e.id),s.a.createElement("td",null,k(e.feeRecipient)),s.a.createElement("td",null,function(e){if(e.includes("0a3b0a4f"))return"Add "+e.replace("0x0a3b0a4f000000000000000000000000","0x");if(e.includes("10bf5068")){var t=e.replace("0x10bf5068000000000000000000000000000000000000000000000","0x");return"Set proposal fee to "+parseInt(t)/1e18}return"unkown: "+e}(e.data)),s.a.createElement("td",null,"0x4EE46dc4962C2c2F6bcd4C098a0E2b28f66A5E90"===(t=e.target)?"Registry":"0xDd806c4fDAd2949a97Fda79036cfbb8750181b37"===t?"Governance":"unknown: "+t),s.a.createElement("td",null,b.unix(parseInt(e.startTime)).format("MMM DD YYYY HH:mm:ss Z")));var t})))),s.a.createElement("form",{onSubmit:this.handleSearch,className:"form-inline justify-content-center mb-5"},s.a.createElement("input",{type:"text",className:"form-control",value:this.state.textToSearch,onChange:this.handleProposalIdTextChange,placeholder:"Proposal ID"}),s.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Search"})),r&&s.a.createElement("div",{className:"mb-5"},s.a.createElement("div",{className:"section-title"},"Proposal"),s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Proposal ID"),s.a.createElement("td",null,r.proposalIdStr.toString())),s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Proposer"),s.a.createElement("td",{className:"td-address"},k(r.feeRecipient))),r.data.includes("0a3b0a4f")?s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Address"),s.a.createElement("td",{className:"td-address"},k(n.utils.toChecksumAddress(r.data.replace("0x0a3b0a4f000000000000000000000000","0x"))))):s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Proposal type"),s.a.createElement("td",null,"Set Proposal fee")),r.data.includes("0a3b0a4f")?s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Twitter"),s.a.createElement("td",null,(t=p[0].returnValues.username,s.a.createElement("a",{href:"https://twitter.com/".concat(t),target:"_blank",rel:"noopener noreferrer"},"@",t)))):s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Proposed fee"),s.a.createElement("td",null,parseInt(r.data.replace("0x10bf5068000000000000000000000000000000000000000000000","0x"))/1e18)),s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Starting Time"),s.a.createElement("td",null,b.unix(parseInt(r.startTime)).format("MMM DD YYYY HH:mm:ss Z"))),s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Votes (Yes / No)"),s.a.createElement("td",null,P(!0,n.utils.fromWei(r.yesCount.toString()))," ","/"," ",P(!1,n.utils.fromWei(r.noCount.toString())))),s.a.createElement("tr",null,s.a.createElement("td",{className:"bg-gray"},"Result"),s.a.createElement("td",null,(e=r.result,M[e])))))),o.length>0&&s.a.createElement("div",{className:"mb-5"},s.a.createElement("div",{className:"section-title"},"Vote Events"),s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("thead",{className:"thead-light"},s.a.createElement("tr",null,s.a.createElement("th",null,"TX"),s.a.createElement("th",null,"Voter"),s.a.createElement("th",null,"Voted for"),s.a.createElement("th",null,"Weight"))),s.a.createElement("tbody",null,o.map(function(e,t){var a=e.returnValues;return s.a.createElement("tr",{key:"vote-event-"+t},s.a.createElement("td",{className:"td-tx"},I(e.transactionHash)),s.a.createElement("td",{className:"td-address"},k(a.voter)),s.a.createElement("td",null,a.approve?s.a.createElement("span",{className:"text-success"},"Yes"):s.a.createElement("span",{className:"text-danger"},"No")),s.a.createElement("td",null,P(a.approve,n.utils.fromWei(a.weight.toString()))))})))),l.length>0&&s.a.createElement("div",{className:"mb-5"},s.a.createElement("div",{className:"section-title"},"RemoveVote Events"),s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("thead",{className:"thead-light"},s.a.createElement("tr",null,s.a.createElement("th",null,"TX"),s.a.createElement("th",null,"Voter"))),s.a.createElement("tbody",null,l.map(function(e,t){var a=e.returnValues;return s.a.createElement("tr",{key:"vote-event-"+t},s.a.createElement("td",{className:"td-tx"},I(e.transactionHash)),s.a.createElement("td",{className:"td-address"},k(a.voter)))}))))),s.a.createElement("footer",{className:"footer bg-light text-center"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"text-muted"},s.a.createElement("a",{href:"https://github.com/Roger-Wu/humanitydao-applicant-status-checker",target:"_blank",rel:"noopener noreferrer"},"Source Code on GitHub")),s.a.createElement("div",{className:"text-muted"},"Donate ETH or tokens:"," ",k("0x36fAa1e49fF125ac72ceae0d5a2E35bC9aDD6591"))))):s.a.createElement("div",{className:"text-center pt-5"},s.a.createElement("div",{className:"spinner-grow",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[194,2,1]]]);
//# sourceMappingURL=main.4e3ca0f0.chunk.js.map